function SaveProcessVideo(){const n=_videoOpdts.filter(n=>n.OpSerial&&n.OpSerial!=="0");console.log(n);n&&n.length>0?UploadMainVideoToServer():MsgInform("Information","There is no selected process.","error",!1,!0)}function SplitVideoOp(n,t){const i=_videoOpdts.filter(n=>n.OpSerial&&n.OpSerial!=="0"),r=new AjaxConfig(UrlSplitOpdtVideos,!0,JSON.stringify({opdtVideos:i,inputFilePath:n,connectionId:t}));return AjaxPostCommon(r,n=>{if(console.log(n),n.IsSuccess===!1)MsgInform("Error","An error occured, please try again or contact admin.","error",!1,!0);else{for(var t of n){const n=toolkit.getNode(t.Result.OpSerial);n.data.ShowButtonPlayVideo=!0;toolkit.updateNode(n)}document.getElementById(DivGlobe).style.display="none"}})}function SendCroppedOpdtVideoInfo(n,t){const i=_videoOpdts.filter(n=>n.OpSerial&&n.OpSerial!=="0"),r=uuidv4();return $.post(UrlSplitOpdtVideos,{opdtVideos:i,inputFilePath:n,connectionId:t}).done(n=>{if(console.log(n),n.IsSuccess===!1)MsgInform("Error","An error occured, please try again or contact admin.","error",!1,!0);else{for(var t of n){const n=toolkit.getNode(t.Result.OpSerial);n.data.ShowButtonPlayVideo=!0;toolkit.updateNode(n)}document.getElementById(DivGlobe).style.display="none"}}).fail((n,t,i)=>{HandleException(n,t,i)})}function UploadMainVideoToServer(){const t=uuidv4(),n=$("#inputUploadVideo")[0].files;if(n.length===0)console.log("No file to upload");else{const r=n[0],u=[],s=3145728,i=GetSelectedOneRowData(gridOpsTableId);let f=0,e=s;const l=r.size;while(f<l)u.push(r.slice(f,e)),f=e,e=f+s;const a=u.length,h=[];let c=0,v=[],o;$.blockUI({fadeIn:1e3,message:"<h3>Uploading video to server...<\/h3>",onBlock:()=>{while(u.length>0){c++;const f=u.shift(),e=r.name+".part_"+c+"."+a,n=new FormData;n.append(r.name,f);n.append("FileName",r.name);n.append("FilePartName",e);n.append("guid",t);n.append("Edition",i.Edition2);n.append("StyleCode",i.StyleCode);n.append("StyleSize",i.StyleSize);n.append("StyleColorSerial",i.StyleColorSerial);n.append("RevNo",i.RevNo);n.append("OpRevNo",i.OpRevNo);const s=UploadChunkFile(n,n=>{console.log(n),v.push(n),n&&n.IsSuccess&&n.Result&&(console.log("Done uploading video and file is merged."),console.log(n.Result),o=n.Result)});h.push(s)}$.when.apply($,h).done(()=>{if($.unblockUI(),console.log("All threads completed"),MsgInform("Information","Splitting video...\n We will notify once finish.","info",!1,!0),document.getElementById(DivGlobe).style.display="block",o){const n=$.connection.opsVideoHub;console.log($.connection);console.log(n);n.client.sendMessage=(n,t)=>{console.log(n);console.log(`Number of video: ${t}`);const r=document.getElementById("vdpAlerts"),i=createAlertTag(n);r.appendChild(i);setTimeout(()=>{i.remove()},5e3)};$.connection.hub.start().done(()=>{console.log("SignalR is started."),n.server.getConnectionId().done(n=>{SplitVideoOp(o,n)})})}})}})}}function UploadChunkFile(n,t){return $.ajax({url:UrlUploadChunkVideos,async:!0,type:"POST",data:n,contentType:!1,processData:!1,success:n=>{t(n)},beforeSend:()=>{},complete:()=>{},error:n=>{console.log(n)}})}function createProcessDropdownList(n,t){const r=document.createElement("select"),u=document.createElement("option");u.setAttribute("value",0);u.innerHTML="Select process!";r.appendChild(u);r.id=`selP${t}`;for(var i of n){const n=document.createElement("option"),t=i.OpNameLan?i.OpNameLan:i.OpName,u=i.OpNum?`[${i.OpNum}]`:"[]";n.setAttribute("value",i.OpSerial);n.innerHTML=`${u} ${t}`;r.appendChild(n)}return r}function createRightVideoList(n){const r=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),f=document.createElement("div"),a=document.createElement("span"),t=document.createElement("video"),e=document.createElement("button"),p=document.createElement("span"),o=document.createElement("div"),v=document.createElement("div"),w=document.createElement("button");r.classList.add("row","vdp-modal--each-vd");v.classList.add("row");a.classList.add("op__total-time");const y=createProcessDropdownList(window.CurrentOpdts,n.PartNo),i=`sp${n.PartNo}`;return v.appendChild(y),$(y).multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,maxHeight:300,buttonWidth:"200px",onChange:t=>{const r=_videoOpdts.find(n=>n.OpSerial===t[0].value.toString());r?(MsgInform("Alert",`This process was selected for video number: ${r.PartNo}`,"error",!0,!0),r.OpSerial?console.log(r.OpSerial):(document.getElementById(i).innerHTML="Select process!",document.getElementById(i).style.cssText="color: red !important")):(n.OpSerial=t[0].value.toString(),n.DisplayName=t[0].text,document.getElementById(i).innerHTML=t[0].text,document.getElementById(i).style.cssText=t[0].value.toString()==="0"?"color: red !important":"color: #000 !important",console.log(t[0].value))},templates:{button:`<span id=${i} class="multiselect dropdown-toggle vdp__drp-text" data-toggle="dropdown">Select process!</span>`}}),r.appendChild(o),r.appendChild(v),w.classList.add("glyphicon","glyphicon-plus-sign","op__btn--add-process"),t.classList.add("op-vdp__video"),s.classList.add("col-md-9"),u.classList.add("col-md-3"),h.classList.add("row"),l.classList.add("row"),f.classList.add("row"),f.innerHTML="Total time: ",a.innerHTML=new Date(n.TotalTime*1e3).toISOString().substr(11,8),f.appendChild(a),e.classList.add("vdp__btn-close-part-video"),l.innerHTML=`${n.StartTime} - ${n.EndTime}`,c.innerHTML=`${n.PartNo}`,c.classList.add("op__part-no"),h.appendChild(c),e.addEventListener("click",()=>{ConfirmYesNo("Confirmation","Are you sure to cancel this video?",()=>{r.remove();const t=document.getElementsByClassName("vdp-modal--each-vd");t&&t.length===0&&(_partVideo=0);const i=_videoOpdts.map(n=>n.PartNo).indexOf(n.PartNo);i>-1&&_videoOpdts.splice(i,1);const u=document.getElementById(`divPart${n.PartNo}`);u&&u.remove()},()=>{})}),_currentVideoSrc&&t.setAttribute("src",_currentVideoSrc),t.setAttribute("controls","controls"),t.currentTime=convertToSecond(n.StartTime),t.ontimeupdate=()=>{t.currentTime>=convertToSecond(n.EndTime)&&t.pause()},s.appendChild(t),u.appendChild(h),u.appendChild(l),u.appendChild(f),e.appendChild(p),o.appendChild(e),o.appendChild(s),o.appendChild(u),r}function moveSlidersToNewRangeTime(n){const t=_sliderRight.style.left,e=parseFloat(t.replace(/%/gi,"")),i=_sliderLeft.style.left,o=_txtCropSec.value,u=_vidTag.duration/100*e;let r=parseInt(o)+u,f=r/_vidTag.duration*100;if(e<100)if(parseInt(o)<1)MsgInform("Error","Invalid splitting second!","error",!1,!0);else{console.log(_spSplitBar.style.width);_sliderLeft.style.left=t;r>_vidTag.duration&&(r=_vidTag.duration);_vidTag.currentTime=u;f>100&&(f=100);_sliderRight.style.left=`${f}%`;_spSplitBar.style.left=t;_circleSlider.style.left=t;const e=new Date(u*1e3).toISOString(),o=new Date(r*1e3).toISOString();_startH.value=e.substr(11,2);_startM.value=e.substr(14,2);_startS.value=e.substr(17,2);_endH.value=o.substr(11,2);_endM.value=o.substr(14,2);_endS.value=o.substr(17,2);const h=_vidTag.duration/100*parseFloat(i.replace(/%/gi,"")),s=new SplitControl(n.Edition,n.StyleCode,n.StyleColorSerial,n.StyleSize,n.RevNo,n.OpRevNo,n.OpSerial,n.StartTime,n.EndTime,n.PartNo,n.DisplayName,i,t,_spSplitBar.style.width,h);console.log(s);document.getElementById(DivBarPart).appendChild(addPartBar(s));const c=_sliderLeft.getBoundingClientRect(),l=_sliderRight.getBoundingClientRect(),a=_sliderWrap.clientWidth,v=(l.x-c.x)/a*100;_spSplitBar.style.width=`${v}%`;console.log(n);document.getElementById(DivVideoRightList).appendChild(createRightVideoList(n))}else{_limitedCropping=!0;const r=_vidTag.duration/100*parseFloat(i.replace(/%/gi,"")),u=new SplitControl(n.Edition,n.StyleCode,n.StyleColorSerial,n.StyleSize,n.RevNo,n.OpRevNo,n.OpSerial,n.StartTime,n.EndTime,n.PartNo,n.DisplayName,i,t,_spSplitBar.style.width,r);document.getElementById(DivBarPart).appendChild(addPartBar(u));document.getElementById(DivVideoRightList).appendChild(createRightVideoList(n))}}function moveSplittingControls(n,t,i,r,u,f){console.log(n);_sliderLeft.style.left=n;_vidTag.currentTime=r;_sliderRight.style.left=t;_spSplitBar.style.left=n;_spSplitBar.style.width=i;_startH.value=u.substr(0,2);_startM.value=u.substr(3,2);_startS.value=u.substr(6,2);_endH.value=f.substr(0,2);_endM.value=f.substr(3,2);_endS.value=f.substr(6,2)}function addPartBar(n){const t=document.createElement("div");return t.id=`divPart${n.PartNo}`,t.addEventListener("click",()=>{moveSplittingControls(n.StartedSplittingLeft,n.EndedSplittingLeft,n.SplittingBarWidth,n.StartedDuration,n.StartTime,n.EndTime)}),colorIndex===BarColour.length&&(colorIndex=0),t.style.backgroundColor=BarColour[colorIndex],colorIndex++,t.style.left=n.StartedSplittingLeft,t.style.width=n.SplittingBarWidth,t.style.cursor="pointer",t.innerHTML=n.PartNo,t}function cropVideo(){if(validateStartEndTime(!0)){console.log("Crop video...");_partVideo++;const t=parseInt(_endH.value)*3600+parseInt(_endM.value)*60+parseInt(_endS.value)-(parseInt(_startH.value)*3600+parseInt(_startM.value)*60+parseInt(_startS.value)),n=GetSelectedOneRowData(gridOpsTableId);console.log(t);let i=new VideoOpdt(n.Edition,n.StyleCode,n.StyleColorSerial,n.StyleSize,n.RevNo,n.OpRevNo,null,`${_startH.value}:${_startM.value}:${_startS.value}`,`${_endH.value}:${_endM.value}:${_endS.value}`,_partVideo,null,t,new Date(t*1e3).toISOString().substr(11,8));_videoOpdts.push(i);moveSlidersToNewRangeTime(i)}}function dragStartVideo(n){console.log(n.currentTarget.innerHTML);event.dataTransfer.setData("VideoNo",n.currentTarget.innerHTML)}function allowDropVideo(n){n.preventDefault();console.log("Allowing dropping video")}function dropVideo(n){n.preventDefault();const t=n.dataTransfer.getData("VideoNo"),r=_videoOpdts.find(n=>n.PartNo.toString()===t),i=n.currentTarget.id.substr(4),u=_videoOpdts.find(n=>n.OpSerial===i),f=document.getElementById(`spOpName${i}`);if(u)MsgInform("Alert",`This process was selected for video number: ${u.PartNo}`,"error",!0,!0);else{r.OpSerial=i;r.DisplayName=f.innerHTML;console.log(`Video number: ${t}`);console.log(`OpSerial: ${i}`);console.log($(`#selP${t}`));$(`#selP${t}`).multiselect("deselectAll",!1);$(`#selP${t}`).multiselect("select",[i.toString()]);$(`#selP${t}`).multiselect("refresh");const u=document.getElementById("vdpAlerts"),n=createInformTag(`&nbsp;Assigned video number '${t}' to process: ${f.innerHTML}`);u.appendChild(n);setTimeout(()=>{n.remove()},5e3)}}function droppableProcessNodes(){const n=toolkit.getNodes();for(var t of n){const n=$(`[data-jtk-node-id="${t.data.id}"]`);n[0]?($(n[0]).ondrop=n=>{n.preventDefault(),console.log("drop a video...")},$(n[0]).ondragover=n=>{n.stopPropagation(),n.preventDefault()}):console.log(n)}}function createInformTag(n){const t=document.createElement("div"),i=document.createElement("button"),r=document.createElement("span"),u=document.createElement("span"),f=document.createElement("span");return t.classList.add("alert","alert-success","alert-dismissible","fadeIn"),t.width="100%",t.style.borderWidth=0,t.setAttribute("role","alert"),i.setAttribute("type","button"),i.setAttribute("data-dismiss","alert"),i.setAttribute("aria-label","Close"),i.classList.add("close"),i.style.top="-10px !important",r.setAttribute("aria-hidden","true"),r.innerHTML="&times;",i.appendChild(r),t.appendChild(i),u.classList.add("glyphicon","glyphicon-ok"),t.appendChild(u),f.innerHTML=n,t.appendChild(f),t}function createAlertTag(n){const t=document.createElement("div"),i=document.createElement("button"),r=document.createElement("span"),u=document.createElement("span"),f=document.createElement("strong"),s=document.createElement("br"),e=document.createElement("span"),h=document.createElement("br"),o=document.createElement("span");return t.classList.add("alert","alert-success","alert-dismissible","fadeIn"),t.width="100%",t.style.borderWidth=0,t.setAttribute("role","alert"),i.setAttribute("type","button"),i.setAttribute("data-dismiss","alert"),i.setAttribute("aria-label","Close"),i.classList.add("close"),i.style.top="-10px !important",r.setAttribute("aria-hidden","true"),r.innerHTML="&times;",i.appendChild(r),t.appendChild(i),u.classList.add("glyphicon","glyphicon-ok"),t.appendChild(u),f.innerHTML="&nbsp; Successfully!",t.appendChild(f),t.appendChild(s),e.innerHTML="Saved video for process",t.appendChild(e),t.appendChild(h),o.innerHTML=n,t.appendChild(o),t}function validateStartEndTime(n){return startTimeToSecond()>=endTimeToSecond()?(n&&MsgInform("Error","Ending time must be greater than starting time.","error",!1,!0),!1):startTimeToSecond()>=_vidTag.duration?(n&&MsgInform("Error","Invalid starting time.","error",!1,!0),!1):endTimeToSecond()>=_vidTag.duration?(n&&MsgInform("Error","Invalid ending time.","error",!1,!0),!1):!0}function startTimeToSecond(){return parseInt(_startH.value)*3600+parseInt(_startM.value)*60+parseInt(_startS.value)}function endTimeToSecond(){return parseInt(_endH.value*3600)+parseInt(_endM.value)*60+parseInt(_endS.value)}function convertToSecond(n){const t=n.substr(0,2),i=n.substr(3,2),r=n.substr(6,2);return parseInt(t)*3600+parseInt(i)*60+parseInt(r)}function changeTimeValue(n){const t=parseInt(n.currentTarget.value);n.currentTarget.value=t?t<0?`0${t.toString().replace(/-/gi,"")}`:n.currentTarget.id===StartH||n.currentTarget.id===EndH?t<24?t.toString().length===1?`0${t}`:t:"23":t<60?t.toString().length===1?`0${t}`:t:"59":"00";(n.currentTarget.id===StartH||n.currentTarget.id===StartM||n.currentTarget.id===StartS)&&validateStartEndTime(!1)&&(_isStartTimeChange=!0,_vidTag.currentTime=startTimeToSecond());(n.currentTarget.id===EndH||n.currentTarget.id===EndM||n.currentTarget.id===EndS)&&validateStartEndTime(!1)&&(_isEndTimeChange=!0,_vidTag.currentTime=endTimeToSecond())}function mouseDownSliderLeft(){console.log("Allow moving left slider");_isSlideLeft=!0;_isSlide=!0}function mouseDownSliderRight(){console.log("Allow moving right slider");_isSlideRight=!0;_isSlide=!0}function oneSecondToPx(n){const t=document.getElementById(VdProcess).duration;return n/t}function getCurrentTime(n){const t=_sliderWrap.getBoundingClientRect(),i=n/t.width*100,r=document.getElementById(VdProcess).duration;return i.toFixed(2)/100*r}function mouseMove(n){const t=_sliderWrap.getBoundingClientRect(),i=_circleSlider.getBoundingClientRect();if(n.clientX>=t.left-i.width/2&&n.clientX<=t.width+t.left+i.width/2){const f=n.clientX-t.left,i=f/t.width*100,r=_sliderLeft.getBoundingClientRect(),u=_sliderRight.getBoundingClientRect();if(!_isSlide||_isSlideLeft||_isSlideRight||(_circleSlider.style.left=`${i}%`),_isSlideLeft)if(u.x+u.width/2-n.clientX>oneSecondToPx(t.width)){_isMsgBoxShow=!1;_msgBox.style.display="none";_sliderLeft.style.left=`${i}%`;_spSplitBar.style.left=`${i}%`;const n=_sliderWrap.clientWidth,t=(u.x-r.x)/n*100;_spSplitBar.style.width=`${t}%`;_circleSlider.style.left=`${i}%`}else _isMsgBoxShow=!0,_msgBox.style.display="block";if(_isSlideRight)if(n.clientX-(r.x+r.width/2)>oneSecondToPx(t.width)){_isMsgBoxShow=!0;_msgBox.style.display="none";_sliderRight.style.left=`${i}%`;const n=_sliderWrap.clientWidth,t=(u.x-r.x)/n*100;_spSplitBar.style.width=`${t}%`;_circleSlider.style.left=`${i}%`}else _msgBox.style.display="block";if(_isSlide){console.log("moving current slider");const n=_circleSlider.style.left.replace(/%/gi,""),t=n/100*_vidTag.duration;document.getElementById(VdProcess).currentTime=t}}}function mouseUp(){_isSlide&&(_isSlide=!1);_isSlideLeft&&(_isSlideLeft=!1);_isSlideRight&&(_isSlideRight=!1)}function mouseDownCurrentSlider(){_isSlide=!0}function ontimeUpdate(n){const i=new Date(n.currentTarget.currentTime*1e3).toISOString(),t=n.currentTarget.currentTime/n.currentTarget.duration*100;if(document.getElementById(SpCurentTime).innerHTML=i.substr(11,8),_circleSlider.style.left=`${t}%`,console.log("timePercent"),console.log(t),_isSlideLeft){_sliderLeft.style.left=`${t}%`;_spSplitBar.style.left=`${t}%`;_startH.value=i.substr(11,2);_startM.value=i.substr(14,2);_startS.value=i.substr(17,2);const n=_sliderLeft.getBoundingClientRect(),r=_sliderRight.getBoundingClientRect(),u=_sliderWrap.clientWidth,f=(r.x-n.x)/u*100;_spSplitBar.style.width=`${f}%`}if(_isSlideRight){_sliderRight.style.left=`${t}%`;_endH.value=i.substr(11,2);_endM.value=i.substr(14,2);_endS.value=i.substr(17,2);const n=_sliderLeft.getBoundingClientRect(),r=_sliderRight.getBoundingClientRect();_spSplitBar.style.width=`${r.x-n.x}px`;const u=_sliderWrap.clientWidth,f=(r.x-n.x)/u*100;_spSplitBar.style.width=`${f}%`}if(_isStartTimeChange){_isStartTimeChange=!1;_sliderLeft.style.left=`${t}%`;_spSplitBar.style.left=`${t}%`;const n=_sliderLeft.getBoundingClientRect(),i=_sliderRight.getBoundingClientRect(),r=_sliderWrap.clientWidth,u=(i.x-n.x)/r*100;_spSplitBar.style.width=`${u}%`}if(_isEndTimeChange){_isEndTimeChange=!1;_sliderRight.style.left=`${t}%`;const n=_sliderLeft.getBoundingClientRect(),i=_sliderRight.getBoundingClientRect(),r=_sliderWrap.clientWidth,u=(i.x-n.x)/r*100;_spSplitBar.style.width=`${u}%`}}function playVideo(n){n.currentTarget.classList.toggle("video-pause");const t=document.getElementById(VdProcess);t.paused?t.play():t.pause()}function ClearAllVideoInfo(){_videoOpdts=[];_partVideo=0;colorIndex=0;document.getElementById(VdProcess).src="";document.getElementById(DivVideoTag).style.cssText="display:none !important";document.getElementById(DivLoadVideo).style.cssText="display:block !important";document.getElementById(InputUploadVideo).value="";document.getElementById(DivVideoRightList).innerHTML="";document.getElementById(DivProcessVideo).style.cssText="display:none !important";document.getElementById(DivBarPart).innerHTML=""}function closeVdPreview(){ConfirmYesNo("Confirmation","Are you sure to cancel this video?",()=>{ClearAllVideoInfo()},()=>{})}function dragOverDivVideo(n){n.preventDefault();n.target.style.backgroundColor="dodgerblue";n.target.style.borderColor="#fff";n.target.style.color="white"}function dropDivVideo(n){n.preventDefault();const t=n.dataTransfer.getData();console.log(t);console.log(n.currentTarget.files)}function setDefaultSplitTime(n){const t=new Date(n/100*_sliderLeft.style.left.replace(/%/gi,"")*1e3).toISOString(),i=new Date(n/100*_sliderRight.style.left.replace(/%/gi,"")*1e3).toISOString();_startH.value=t.substr(11,2);_startM.value=t.substr(14,2);_startS.value=t.substr(17,2);_endH.value=i.substr(11,2);_endM.value=i.substr(14,2);_endS.value=i.substr(17,2)}function posSplitControlsByDefaultSecond(){const n=_txtCropSec.value;if(parseInt(n)<1)MsgInform("Error","Invalid default second!","error",!1,!0);else{let t=n/_vidTag.duration*100;console.log(t);t=t>100?100:t;console.log(t);_sliderLeft.style.left="0%";_spSplitBar.style.left="0%";_circleSlider.style.left="0%";_sliderRight.style.left=`${t}%`;const u=_sliderLeft.getBoundingClientRect(),f=_sliderRight.getBoundingClientRect(),i=_sliderWrap.clientWidth,r=(f.x-u.x)/i*100;_spSplitBar.style.width=`${r}%`;console.log(i);console.log(r)}}function onChangedInputVf(n){const i=document.getElementById(AVdPlay);if(i.classList.remove("video-pause"),i.classList.add("video-preview"),console.log(n.currentTarget.files),n.currentTarget.files.length!==0){const r=URL.createObjectURL(n.currentTarget.files[0]),t=document.getElementById(VdProcess);t.src=r;_currentVideoSrc=URL.createObjectURL(n.currentTarget.files[0]);t.onloadeddata=()=>{if(console.log(t.duration),t.duration>86400)console.log("The video is too long.");else{const n=new Date(t.duration*1e3).toISOString().substr(11,8);document.getElementById(SpTotalTime).innerHTML=n;console.log(n);document.getElementById(DivPartVideoSide).style.height=document.getElementById(DivVideoSide).clientHeight+"px";document.getElementById(DivProcessVideo).style.cssText="display:block !important";posSplitControlsByDefaultSecond();setDefaultSplitTime(t.duration)}};console.log(n.currentTarget.files[0]);document.getElementById(DivVideoTag).style.cssText="display:block !important";document.getElementById(DivLoadVideo).style.cssText="display:none !important"}}const InputUploadVideo="inputUploadVideo",DivDropVideo="divDropVideo",LbUploadVideo="lbUploadVideo",VdProcess="vdProcess",JqVdProcess="#vdProcess",DivVideoTag="divVideoTag",DivLoadVideo="divLoadVideo",BtnCloseVdPreview="btnCloseVdPreview",AVdPlay="aVdPlay",SpTotalTime="spTotalTime",SpCurentTime="spCurentTime",DivCurrentSlider="divCurrentSlider",DivSliderWrap="divSliderWrap",SliderLeft="sliderLeft",SliderRight="sliderRight",SpSplitBar="spSplitBar",MsgBox="msgBox",BtnSplit="btnSplit",BtnUploadVideo="btnUploadVideo",BtnSaveVideo="btnSaveVideo",DivProcessVideo="divProcessVideo",DivVideoSide="divVideoSide",DivPartVideoSide="divPartVideoSide",DivBarPart="divBarPart",StartH="startH",StartM="startM",StartS="startS",EndH="endH",EndM="endM",EndS="endS",TxtCropSecond="txtCropSecond",SpMsgContent="spMsgContent",DivVideoRightList="divVideoRightList",DivGlobe="divGlobe",BtnShowProcessVideoModal="btnShowProcessVideoModal",BtnHideOpVideoModal="btnHideOpVideoModal",BtnCloseVdpModal="btnCloseVdpModal",DivRightVideoList="divRightVideoList",JsDivRightVideoList="#divRightVideoList",JsVdpModal="#vdpModal",BtnCloseRightVdList="btnCloseRightVdList",UrlUploadChunkVideos="/OpsLayout/UploadVideoChunkFile",UrlSplitOpdtVideos="/OpsLayout/SplitOpdtVideos",BarColour=["#FF0000","#800000","#6e6e04","#2a0873","#0e750e","#096666"],AjaxWaitMes="<h3>Please wait...<\/h3>";var _isSlide=!1,_isSlideLeft=!1,_isSlideRight=!1,_sliderWrap,_sliderLeft,_sliderRight,_spSplitBar,_txtCropSec,_msgBox,_isMsgBoxShow=!1,_pxPerOneSecond,_vidTag,_circleSlider,_startH,_startM,_startS,_endH,_endM,_endS,_btnSplit,_isStartTimeChange=!1,_isEndTimeChange=!1,_currentVideoSrc,_partVideo=0,_videoOpdts=[],colorIndex=0,_limitedCropping=!1,HideOpVideoModal=!1;(()=>{_sliderLeft=document.getElementById(SliderLeft);_sliderRight=document.getElementById(SliderRight);_spSplitBar=document.getElementById(SpSplitBar);_msgBox=document.getElementById(MsgBox);_vidTag=document.getElementById(VdProcess);_circleSlider=document.getElementById(DivCurrentSlider);_startH=document.getElementById(StartH);_startM=document.getElementById(StartM);_startS=document.getElementById(StartS);_endH=document.getElementById(EndH);_endM=document.getElementById(EndM);_endS=document.getElementById(EndS);_btnSplit=document.getElementById(BtnSplit);_txtCropSec=document.getElementById(TxtCropSecond);document.getElementById(BtnCloseVdPreview).addEventListener("click",closeVdPreview);document.getElementById(AVdPlay).addEventListener("click",playVideo);document.getElementById(InputUploadVideo).addEventListener("change",onChangedInputVf);document.getElementById(LbUploadVideo).addEventListener("dragover",dragOverDivVideo);document.getElementById(LbUploadVideo).addEventListener("drop",dropDivVideo);_startH.addEventListener("change",changeTimeValue);_startM.addEventListener("change",changeTimeValue);_startS.addEventListener("change",changeTimeValue);_endH.addEventListener("change",changeTimeValue);_endM.addEventListener("change",changeTimeValue);_endS.addEventListener("change",changeTimeValue);_btnSplit.addEventListener("click",cropVideo);_circleSlider.addEventListener("mousedown",mouseDownCurrentSlider);_sliderLeft.addEventListener("mousedown",mouseDownSliderLeft);_sliderRight.addEventListener("mousedown",mouseDownSliderRight);window.addEventListener("mousemove",mouseMove);window.addEventListener("mouseup",mouseUp);$("#divDropVideo").on("dragenter dragstart dragend dragleave dragover drag drop",n=>{n.preventDefault()});document.getElementById(VdProcess).ontimeupdate=n=>{ontimeUpdate(n)};_sliderWrap=document.getElementById(DivSliderWrap);document.getElementById(BtnUploadVideo).addEventListener("click",()=>{SaveProcessVideo()});$(JsDivRightVideoList).hide();document.getElementById(BtnHideOpVideoModal).addEventListener("click",()=>{$(JsVdpModal).hide("slide",{direction:"right"},1e3);HideOpVideoModal=!0;setTimeout(()=>{$(JsDivRightVideoList).show("slide",{direction:"right"},1e3)},1e3);const t=document.querySelector("[ng-app=opsApp]"),n=angular.element(t).scope();console.log(_videoOpdts);n.$apply(()=>{n.OpVideo=_videoOpdts})});document.getElementById(BtnCloseVdpModal).addEventListener("click",()=>{HideOpVideoModal=!1})})();class OpMaster extends StyleMaster{constructor(n,t,i,r,u){super(n,t,i,r);this.OpRevNo=u}}class VideoOpdt extends OpMaster{constructor(n,t,i,r,u,f,e,o,s,h,c,l,a){super(t,i,r,u,f);this.Edition=n;this.OpSerial=e;this.StartTime=o;this.EndTime=s;this.PartNo=h;this.DisplayName=c;this.TotalTime=l;this.TotalTimeStr=a}}class SplitControl extends VideoOpdt{constructor(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){super(n,t,i,r,u,f,e,o,s,h,c);this.StartedSplittingLeft=l;this.EndedSplittingLeft=a;this.SplittingBarWidth=v;this.StartedDuration=y}}